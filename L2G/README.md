# lib_text2text
This is the repo of the research: <b>Text2text improvement techniques for question generation</b>
## UniLM training flow
### Install
```
conda create -n text2text python=3.6
conda activate text2text
conda install pytorch==1.1.0 torchvision==0.3.0 cudatoolkit=10.0 -c pytorch

cd unilm
git clone -q https://github.com/NVIDIA/apex.git
cd apex
git reset --hard 1603407bf49c7fc3da74fceb6a6c7b47fece2ef8
python setup.py install --user --cuda_ext --cpp_ext
cd ../..

pip install --user tensorboardX six numpy tqdm path.py pandas scikit-learn lmdb pyarrow py-lz4framed methodtools py-rouge pyrouge nltk
python -c "import nltk; nltk.download('punkt')"
pip install -e git://github.com/Maluuba/nlg-eval.git#egg=nlg-eval

cd unilm
pip install --user --editable .
```

### Data
Please prepare tokenized data following this format:

2 files: train/test/dev.pa.tok.txt and train/test/dev.q.tok.txt


Eg: test.pa.tok.txt
```
Architectural ##ly , the school has a Catholic character . At ##op the Main Building ' s gold dome is a golden statue of the Virgin Mary . Immediately in front of the Main Building and facing it , is a copper statue of Christ with arms up ##rai ##sed with the legend " V ##eni ##te Ad Me O ##m ##nes " . Next to the Main Building is the Basilica of the Sacred Heart . Immediately behind the b ##asi ##lica is the G ##rot ##to , a Marian place of prayer and reflection . It is a replica of the g ##rot ##to at Lou ##rdes , France where the Virgin Mary reputed ##ly appeared to Saint Bern ##ade ##tte So ##ubi ##rous in 1858 . At the end of the main drive ( and in a direct line that connects through 3 statues and the Gold Dome ) , is a simple , modern stone statue of Mary . [SEP] Saint Bern ##ade ##tte So ##ubi ##rous
Architectural ##ly , the school has a Catholic character . At ##op the Main Building ' s gold dome is a golden statue of the Virgin Mary . Immediately in front of the Main Building and facing it , is a copper statue of Christ with arms up ##rai ##sed with the legend " V ##eni ##te Ad Me O ##m ##nes " . Next to the Main Building is the Basilica of the Sacred Heart . Immediately behind the b ##asi ##lica is the G ##rot ##to , a Marian place of prayer and reflection . It is a replica of the g ##rot ##to at Lou ##rdes , France where the Virgin Mary reputed ##ly appeared to Saint Bern ##ade ##tte So ##ubi ##rous in 1858 . At the end of the main drive ( and in a direct line that connects through 3 statues and the Gold Dome ) , is a simple , modern stone statue of Mary . [SEP] a copper statue of Christ
Architectural ##ly , the school has a Catholic character . At ##op the Main Building ' s gold dome is a golden statue of the Virgin Mary . Immediately in front of the Main Building and facing it , is a copper statue of Christ with arms up ##rai ##sed with the legend " V ##eni ##te Ad Me O ##m ##nes " . Next to the Main Building is the Basilica of the Sacred Heart . Immediately behind the b ##asi ##lica is the G ##rot ##to , a Marian place of prayer and reflection . It is a replica of the g ##rot ##to at Lou ##rdes , France where the Virgin Mary reputed ##ly appeared to Saint Bern ##ade ##tte So ##ubi ##rous in 1858 . At the end of the main drive ( and in a direct line that connects through 3 statues and the Gold Dome ) , is a simple , modern stone statue of Mary . [SEP] the Main Building
Architectural ##ly , the school has a Catholic character . At ##op the Main Building ' s gold dome is a golden statue of the Virgin Mary . Immediately in front of the Main Building and facing it , is a copper statue of Christ with arms up ##rai ##sed with the legend " V ##eni ##te Ad Me O ##m ##nes " . Next to the Main Building is the Basilica of the Sacred Heart . Immediately behind the b ##asi ##lica is the G ##rot ##to , a Marian place of prayer and reflection . It is a replica of the g ##rot ##to at Lou ##rdes , France where the Virgin Mary reputed ##ly appeared to Saint Bern ##ade ##tte So ##ubi ##rous in 1858 . At the end of the main drive ( and in a direct line that connects through 3 statues and the Gold Dome ) , is a simple , modern stone statue of Mary . [SEP] a Marian place of prayer and reflection
Architectural ##ly , the school has a Catholic character . At ##op the Main Building ' s gold dome is a golden statue of the Virgin Mary . Immediately in front of the Main Building and facing it , is a copper statue of Christ with arms up ##rai ##sed with the legend " V ##eni ##te Ad Me O ##m ##nes " . Next to the Main Building is the Basilica of the Sacred Heart . Immediately behind the b ##asi ##lica is the G ##rot ##to , a Marian place of prayer and reflection . It is a replica of the g ##rot ##to at Lou ##rdes , France where the Virgin Mary reputed ##ly appeared to Saint Bern ##ade ##tte So ##ubi ##rous in 1858 . At the end of the main drive ( and in a direct line that connects through 3 statues and the Gold Dome ) , is a simple , modern stone statue of Mary . [SEP] a golden statue of the Virgin Mary
As at most other universities , Notre Dame ' s students run a number of news media outlets . The nine student - run outlets include three newspapers , both a radio and television station , and several magazines and journals . Be ##gun as a one - page journal in September 1876 , the Sc ##hol ##astic magazine is issued twice monthly and claims to be the oldest continuous collegiate publication in the United States . The other magazine , The Ju ##ggle ##r , is released twice a year and focuses on student literature and artwork . The Dome year ##book is published annually . The newspapers have varying publication interests , with The Observer published daily and mainly reporting university and other news , and staffed by students from both Notre Dame and Saint Mary ' s College . Unlike Sc ##hol ##astic and The Dome , The Observer is an independent publication and does not have a faculty advisor or any editorial oversight from the University . In 1987 , when some students believed that The Observer began to show a conservative bias , a liberal newspaper , Common Sense was published . Likewise , in 2003 , when other students believed that the paper showed a liberal bias , the conservative paper Irish Rover went into production . Neither paper is published as often as The Observer ; however , all three are distributed to all students . Finally , in Spring 2008 an undergraduate journal for political science research , Beyond Politics , made its debut . [SEP] September 1876
As at most other universities , Notre Dame ' s students run a number of news media outlets . The nine student - run outlets include three newspapers , both a radio and television station , and several magazines and journals . Be ##gun as a one - page journal in September 1876 , the Sc ##hol ##astic magazine is issued twice monthly and claims to be the oldest continuous collegiate publication in the United States . The other magazine , The Ju ##ggle ##r , is released twice a year and focuses on student literature and artwork . The Dome year ##book is published annually . The newspapers have varying publication interests , with The Observer published daily and mainly reporting university and other news , and staffed by students from both Notre Dame and Saint Mary ' s College . Unlike Sc ##hol ##astic and The Dome , The Observer is an independent publication and does not have a faculty advisor or any editorial oversight from the University . In 1987 , when some students believed that The Observer began to show a conservative bias , a liberal newspaper , Common Sense was published . Likewise , in 2003 , when other students believed that the paper showed a liberal bias , the conservative paper Irish Rover went into production . Neither paper is published as often as The Observer ; however , all three are distributed to all students . Finally , in Spring 2008 an undergraduate journal for political science research , Beyond Politics , made its debut . [SEP] twice
As at most other universities , Notre Dame ' s students run a number of news media outlets . The nine student - run outlets include three newspapers , both a radio and television station , and several magazines and journals . Be ##gun as a one - page journal in September 1876 , the Sc ##hol ##astic magazine is issued twice monthly and claims to be the oldest continuous collegiate publication in the United States . The other magazine , The Ju ##ggle ##r , is released twice a year and focuses on student literature and artwork . The Dome year ##book is published annually . The newspapers have varying publication interests , with The Observer published daily and mainly reporting university and other news , and staffed by students from both Notre Dame and Saint Mary ' s College . Unlike Sc ##hol ##astic and The Dome , The Observer is an independent publication and does not have a faculty advisor or any editorial oversight from the University . In 1987 , when some students believed that The Observer began to show a conservative bias , a liberal newspaper , Common Sense was published . Likewise , in 2003 , when other students believed that the paper showed a liberal bias , the conservative paper Irish Rover went into production . Neither paper is published as often as The Observer ; however , all three are distributed to all students . Finally , in Spring 2008 an undergraduate journal for political science research , Beyond Politics , made its debut . [SEP] The Observer
As at most other universities , Notre Dame ' s students run a number of news media outlets . The nine student - run outlets include three newspapers , both a radio and television station , and several magazines and journals . Be ##gun as a one - page journal in September 1876 , the Sc ##hol ##astic magazine is issued twice monthly and claims to be the oldest continuous collegiate publication in the United States . The other magazine , The Ju ##ggle ##r , is released twice a year and focuses on student literature and artwork . The Dome year ##book is published annually . The newspapers have varying publication interests , with The Observer published daily and mainly reporting university and other news , and staffed by students from both Notre Dame and Saint Mary ' s College . Unlike Sc ##hol ##astic and The Dome , The Observer is an independent publication and does not have a faculty advisor or any editorial oversight from the University . In 1987 , when some students believed that The Observer began to show a conservative bias , a liberal newspaper , Common Sense was published . Likewise , in 2003 , when other students believed that the paper showed a liberal bias , the conservative paper Irish Rover went into production . Neither paper is published as often as The Observer ; however , all three are distributed to all students . Finally , in Spring 2008 an undergraduate journal for political science research , Beyond Politics , made its debut . [SEP] three
As at most other universities , Notre Dame ' s students run a number of news media outlets . The nine student - run outlets include three newspapers , both a radio and television station , and several magazines and journals . Be ##gun as a one - page journal in September 1876 , the Sc ##hol ##astic magazine is issued twice monthly and claims to be the oldest continuous collegiate publication in the United States . The other magazine , The Ju ##ggle ##r , is released twice a year and focuses on student literature and artwork . The Dome year ##book is published annually . The newspapers have varying publication interests , with The Observer published daily and mainly reporting university and other news , and staffed by students from both Notre Dame and Saint Mary ' s College . Unlike Sc ##hol ##astic and The Dome , The Observer is an independent publication and does not have a faculty advisor or any editorial oversight from the University . In 1987 , when some students believed that The Observer began to show a conservative bias , a liberal newspaper , Common Sense was published . Likewise , in 2003 , when other students believed that the paper showed a liberal bias , the conservative paper Irish Rover went into production . Neither paper is published as often as The Observer ; however , all three are distributed to all students . Finally , in Spring 2008 an undergraduate journal for political science research , Beyond Politics , made its debut . [SEP] 1987

```

Eg: test.q.tok.txt

```
To whom did the Virgin Mary allegedly appear in 1858 in Lou ##rdes France ?
What is in front of the Notre Dame Main Building ?
The Basilica of the Sacred heart at Notre Dame is beside to which structure ?
What is the G ##rot ##to at Notre Dame ?
What sits on top of the Main Building at Notre Dame ?
When did the Sc ##hol ##astic Magazine of Notre dam ##e begin publishing ?
How often is Notre Dame ' s the Ju ##ggle ##r published ?
```

### Fine-tuning
Change the params from: unilm_bash.sh
Run: ``` bash unilm_bash.sh ```